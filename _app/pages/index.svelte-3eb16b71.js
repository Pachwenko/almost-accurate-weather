import{K as We,S as pe,i as me,s as _e,e as p,c as m,a as w,d as u,b as h,g as Q,J as i,r as z,n as x,t as v,h as y,j as H,k as P,m as V,L as ee,M as re,N as ge,O as ve,l as ne,p as Z,P as Fe,q as ye,Q as Te,R as Se,T as le,U as se,V as Ue,w as Le,o as be,x as we,y as ke,z as Ee,C as De}from"../chunks/index-55937723.js";function Me(s){const e=s-1;return e*e*e+1}function oe(s,{delay:e=0,duration:l=400,easing:r=We}={}){const t=+getComputedStyle(s).opacity;return{delay:e,duration:l,easing:r,css:o=>`opacity: ${o*t}`}}function Pe(s,{delay:e=0,duration:l=400,easing:r=Me,x:t=0,y:o=0,opacity:a=0}={}){const n=getComputedStyle(s),c=+n.opacity,D=n.transform==="none"?"":n.transform,W=c*(1-a);return{delay:e,duration:l,easing:r,css:(f,k)=>`
			transform: ${D} translate(${(1-f)*t}px, ${(1-f)*o}px);
			opacity: ${c-W*k}`}}function Ve(s){let e,l=s[0].morning.name+"",r,t,o;return{c(){e=p("h2"),r=v(l),t=v("'s Forecast: "),o=v(s[2])},l(a){e=m(a,"H2",{});var n=w(e);r=y(n,l),t=y(n,"'s Forecast: "),o=y(n,s[2]),n.forEach(u)},m(a,n){Q(a,e,n),i(e,r),i(e,t),i(e,o)},p(a,n){n&1&&l!==(l=a[0].morning.name+"")&&H(r,l),n&4&&H(o,a[2])},i:x,o:x,d(a){a&&u(e)}}}function Ae(s){let e,l,r,t=s[0].morning&&ie(s),o=s[0].night&&ce(s);return{c(){e=p("div"),t&&t.c(),l=P(),o&&o.c(),this.h()},l(a){e=m(a,"DIV",{class:!0});var n=w(e);t&&t.l(n),l=V(n),o&&o.l(n),n.forEach(u),this.h()},h(){h(e,"class","md:grid-cols-2"),re(e,"grid",s[0].night)},m(a,n){Q(a,e,n),t&&t.m(e,null),i(e,l),o&&o.m(e,null)},p(a,n){a[0].morning?t?t.p(a,n):(t=ie(a),t.c(),t.m(e,l)):t&&(t.d(1),t=null),a[0].night?o?o.p(a,n):(o=ce(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null),n&1&&re(e,"grid",a[0].night)},i(a){r||ge(()=>{r=ve(e,Pe,{y:5,duration:250}),r.start()})},o:x,d(a){a&&u(e),t&&t.d(),o&&o.d()}}}function ie(s){let e,l,r=s[0].morning.dayOfWeek+"",t,o,a,n,c,D,W,f=s[0].morning.temperature+"",k,F,A=s[0].morning.temperatureUnit+"",I,O,L,M,$=s[0].morning.windSpeed+"",R,C,q=s[0].morning.windDirection+"",j,G,N,g,b,_,T=s[0].morning.detailedForecast+"",S;return{c(){e=p("div"),l=p("h3"),t=v(r),o=P(),a=p("p"),n=p("em"),c=v("It may or may not be"),D=P(),W=p("em"),k=v(f),F=v("\xB0"),I=v(A),O=P(),L=p("p"),M=v("With winds "),R=v($),C=P(),j=v(q),G=P(),N=p("img"),b=P(),_=p("p"),S=v(T),this.h()},l(U){e=m(U,"DIV",{class:!0});var d=w(e);l=m(d,"H3",{class:!0});var E=w(l);t=y(E,r),E.forEach(u),o=V(d),a=m(d,"P",{});var X=w(a);n=m(X,"EM",{class:!0});var J=w(n);c=y(J,"It may or may not be"),J.forEach(u),D=V(X),W=m(X,"EM",{class:!0});var K=w(W);k=y(K,f),F=y(K,"\xB0"),I=y(K,A),K.forEach(u),X.forEach(u),O=V(d),L=m(d,"P",{});var Y=w(L);M=y(Y,"With winds "),R=y(Y,$),C=V(Y),j=y(Y,q),Y.forEach(u),G=V(d),N=m(d,"IMG",{src:!0,alt:!0}),b=V(d),_=m(d,"P",{class:!0});var B=w(_);S=y(B,T),B.forEach(u),d.forEach(u),this.h()},h(){h(l,"class","col-span-3"),h(n,"class","italic"),h(W,"class","font-bold"),ee(N.src,g=s[0].morning.icon)||h(N,"src",g),h(N,"alt","forecast icon"),h(_,"class","col-span-3"),h(e,"class","grid grid-cols-3 gap-2 justify-items-center")},m(U,d){Q(U,e,d),i(e,l),i(l,t),i(e,o),i(e,a),i(a,n),i(n,c),i(a,D),i(a,W),i(W,k),i(W,F),i(W,I),i(e,O),i(e,L),i(L,M),i(L,R),i(L,C),i(L,j),i(e,G),i(e,N),i(e,b),i(e,_),i(_,S)},p(U,d){d&1&&r!==(r=U[0].morning.dayOfWeek+"")&&H(t,r),d&1&&f!==(f=U[0].morning.temperature+"")&&H(k,f),d&1&&A!==(A=U[0].morning.temperatureUnit+"")&&H(I,A),d&1&&$!==($=U[0].morning.windSpeed+"")&&H(R,$),d&1&&q!==(q=U[0].morning.windDirection+"")&&H(j,q),d&1&&!ee(N.src,g=U[0].morning.icon)&&h(N,"src",g),d&1&&T!==(T=U[0].morning.detailedForecast+"")&&H(S,T)},d(U){U&&u(e)}}}function ce(s){let e,l,r=s[0].night.dayOfWeek+"",t,o,a,n,c,D,W,f,k=s[0].night.temperature+"",F,A,I=s[0].night.temperatureUnit+"",O,L,M,$,R=s[0].night.windSpeed+"",C,q,j=s[0].night.windDirection+"",G,N,g,b,_,T,S=s[0].night.detailedForecast+"",U;return{c(){e=p("div"),l=p("h3"),t=v(r),o=v(" night"),a=P(),n=p("p"),c=p("em"),D=v("It may or may not be"),W=P(),f=p("em"),F=v(k),A=v("\xB0"),O=v(I),L=P(),M=p("p"),$=v("With winds "),C=v(R),q=P(),G=v(j),N=P(),g=p("img"),_=P(),T=p("p"),U=v(S),this.h()},l(d){e=m(d,"DIV",{class:!0});var E=w(e);l=m(E,"H3",{class:!0});var X=w(l);t=y(X,r),o=y(X," night"),X.forEach(u),a=V(E),n=m(E,"P",{});var J=w(n);c=m(J,"EM",{class:!0});var K=w(c);D=y(K,"It may or may not be"),K.forEach(u),W=V(J),f=m(J,"EM",{class:!0});var Y=w(f);F=y(Y,k),A=y(Y,"\xB0"),O=y(Y,I),Y.forEach(u),J.forEach(u),L=V(E),M=m(E,"P",{});var B=w(M);$=y(B,"With winds "),C=y(B,R),q=V(B),G=y(B,j),B.forEach(u),N=V(E),g=m(E,"IMG",{src:!0,alt:!0}),_=V(E),T=m(E,"P",{class:!0});var ae=w(T);U=y(ae,S),ae.forEach(u),E.forEach(u),this.h()},h(){h(l,"class","col-span-3"),h(c,"class","italic"),h(f,"class","font-bold"),ee(g.src,b=s[0].night.icon)||h(g,"src",b),h(g,"alt","forecast icon"),h(T,"class","col-span-3"),h(e,"class","grid grid-cols-3 pl-2 gap-2 justify-items-center md:border-l")},m(d,E){Q(d,e,E),i(e,l),i(l,t),i(l,o),i(e,a),i(e,n),i(n,c),i(c,D),i(n,W),i(n,f),i(f,F),i(f,A),i(f,O),i(e,L),i(e,M),i(M,$),i(M,C),i(M,q),i(M,G),i(e,N),i(e,g),i(e,_),i(e,T),i(T,U)},p(d,E){E&1&&r!==(r=d[0].night.dayOfWeek+"")&&H(t,r),E&1&&k!==(k=d[0].night.temperature+"")&&H(F,k),E&1&&I!==(I=d[0].night.temperatureUnit+"")&&H(O,I),E&1&&R!==(R=d[0].night.windSpeed+"")&&H(C,R),E&1&&j!==(j=d[0].night.windDirection+"")&&H(G,j),E&1&&!ee(g.src,b=d[0].night.icon)&&h(g,"src",b),E&1&&S!==(S=d[0].night.detailedForecast+"")&&H(U,S)},d(d){d&&u(e)}}}function Oe(s){let e,l;function r(a,n){return a[1]?Ae:Ve}let t=r(s),o=t(s);return{c(){e=p("article"),l=p("div"),o.c(),this.h()},l(a){e=m(a,"ARTICLE",{class:!0});var n=w(e);l=m(n,"DIV",{});var c=w(l);o.l(c),c.forEach(u),n.forEach(u),this.h()},h(){h(e,"class","weatherCard")},m(a,n){Q(a,e,n),i(e,l),o.m(l,null)},p(a,[n]){t===(t=r(a))&&o?o.p(a,n):(o.d(1),o=t(a),o&&(o.c(),z(o,1),o.m(l,null)))},i(a){z(o)},o:x,d(a){a&&u(e),o.d()}}}function $e(s,e,l){let r,{data:t}=e,{expand:o=!0}=e;return s.$$set=a=>{"data"in a&&l(0,t=a.data),"expand"in a&&l(1,o=a.expand)},s.$$.update=()=>{s.$$.dirty&1&&l(2,r=t.night?`High: ${t.morning.temperature} Low: ${t.night.temperature}, ${t.morning.shortForecast}`:`High: ${t.morning.temperature} ${t.morning.shortForecast}`)},[t,o,r]}class Ie extends pe{constructor(e){super(),me(this,e,$e,Oe,_e,{data:0,expand:1})}}function fe(s,e,l){const r=s.slice();return r[10]=e[l],r[12]=l,r}function ue(s){let e,l=s[0].city+"",r,t,o=s[0].state+"",a;return{c(){e=p("h2"),r=v(l),t=v(", "),a=v(o),this.h()},l(n){e=m(n,"H2",{class:!0});var c=w(e);r=y(c,l),t=y(c,", "),a=y(c,o),c.forEach(u),this.h()},h(){h(e,"class","text-3xl text-sky-100 m-2")},m(n,c){Q(n,e,c),i(e,r),i(e,t),i(e,a)},p(n,c){c&1&&l!==(l=n[0].city+"")&&H(r,l),c&1&&o!==(o=n[0].state+"")&&H(a,o)},d(n){n&&u(e)}}}function de(s){let e,l,r=s[1],t=[];for(let a=0;a<r.length;a+=1)t[a]=he(fe(s,r,a));const o=a=>Z(t[a],1,1,()=>{t[a]=null});return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=ne()},l(a){for(let n=0;n<t.length;n+=1)t[n].l(a);e=ne()},m(a,n){for(let c=0;c<t.length;c+=1)t[c].m(a,n);Q(a,e,n),l=!0},p(a,n){if(n&2){r=a[1];let c;for(c=0;c<r.length;c+=1){const D=fe(a,r,c);t[c]?(t[c].p(D,n),z(t[c],1)):(t[c]=he(D),t[c].c(),z(t[c],1),t[c].m(e.parentNode,e))}for(be(),c=r.length;c<t.length;c+=1)o(c);ye()}},i(a){if(!l){for(let n=0;n<r.length;n+=1)z(t[n]);l=!0}},o(a){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)Z(t[n]);l=!1},d(a){Te(t,a),a&&u(e)}}}function Ce(s){let e,l;return e=new Ie({props:{data:s[10],expand:!0}}),{c(){we(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,t){Ee(e,r,t),l=!0},p(r,t){const o={};t&2&&(o.data=r[10]),e.$set(o)},i(r){l||(z(e.$$.fragment,r),l=!0)},o(r){Z(e.$$.fragment,r),l=!1},d(r){De(e,r)}}}function He(s){let e,l;return e=new Ie({props:{data:s[10],expand:!0}}),{c(){we(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,t){Ee(e,r,t),l=!0},p(r,t){const o={};t&2&&(o.data=r[10]),e.$set(o)},i(r){l||(z(e.$$.fragment,r),l=!0)},o(r){Z(e.$$.fragment,r),l=!1},d(r){De(e,r)}}}function he(s){let e,l,r,t,o,a,n;const c=[He,Ce],D=[];function W(f,k){return f[12]===0?0:1}return l=W(s),r=D[l]=c[l](s),{c(){e=p("div"),r.c(),t=P(),this.h()},l(f){e=m(f,"DIV",{class:!0});var k=w(e);r.l(k),t=V(k),k.forEach(u),this.h()},h(){h(e,"class","py-2")},m(f,k){Q(f,e,k),D[l].m(e,null),i(e,t),n=!0},p(f,k){r.p(f,k)},i(f){n||(z(r),ge(()=>{a&&a.end(1),o=ve(e,oe,{duration:500}),o.start()}),n=!0)},o(f){Z(r),o&&o.invalidate(),a=Fe(e,oe,{}),n=!1},d(f){f&&u(e),D[l].d(),f&&a&&a.end()}}}function je(s){let e,l,r,t,o,a,n,c,D,W,f,k,F,A,I,O,L,M,$,R,C,q,j,G,N,g=s[0].city&&s[0].state&&ue(s),b=s[3]&&de(s);return{c(){e=p("meta"),l=P(),r=p("div"),t=p("h1"),o=v("Welcome to a special weather App. It tells you the weather, but is honest about it"),a=P(),n=p("div"),c=p("label"),D=p("h2"),W=v("Address"),f=p("input"),k=P(),F=p("button"),A=v("Get Forecast"),I=P(),g&&g.c(),O=P(),b&&b.c(),L=P(),M=p("div"),$=p("p"),R=v("Data provided by the US NWS. "),C=p("a"),q=v("View source code"),this.h()},l(_){const T=Se('[data-svelte="svelte-1i7y4y"]',document.head);e=m(T,"META",{name:!0,content:!0}),T.forEach(u),l=V(_),r=m(_,"DIV",{class:!0});var S=w(r);t=m(S,"H1",{});var U=w(t);o=y(U,"Welcome to a special weather App. It tells you the weather, but is honest about it"),U.forEach(u),a=V(S),n=m(S,"DIV",{class:!0,id:!0});var d=w(n);c=m(d,"LABEL",{for:!0});var E=w(c);D=m(E,"H2",{});var X=w(D);W=y(X,"Address"),X.forEach(u),E.forEach(u),f=m(d,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),k=V(d),F=m(d,"BUTTON",{class:!0});var J=w(F);A=y(J,"Get Forecast"),J.forEach(u),d.forEach(u),I=V(S),g&&g.l(S),O=V(S),b&&b.l(S),L=V(S),M=m(S,"DIV",{});var K=w(M);$=m(K,"P",{});var Y=w($);R=y(Y,"Data provided by the US NWS. "),C=m(Y,"A",{href:!0,class:!0});var B=w(C);q=y(B,"View source code"),B.forEach(u),Y.forEach(u),K.forEach(u),S.forEach(u),this.h()},h(){h(e,"name","description"),h(e,"content","A weather app that is honest about it's predictions"),document.title="Your honest Weather forecast",h(c,"for","address"),h(f,"id","address"),h(f,"type","text"),h(f,"placeholder","Enter a location"),h(f,"class","text-stone-900"),h(F,"class","bg-stone-100 hover:bg-stone-400 text-stone-900 font-semibold py-2 px-4 border border-stone-400 rounded shadow"),h(n,"class","container mx-auto my-4"),h(n,"id","address-input"),h(C,"href","https://github.com/Pachwenko/almost-accurate-weather"),h(C,"class","normal-link"),h(r,"class","mx-auto bg-stone-900 text-stone-100 flex flex-col mx-auto text-center min-h-screen")},m(_,T){i(document.head,e),Q(_,l,T),Q(_,r,T),i(r,t),i(t,o),i(r,a),i(r,n),i(n,c),i(c,D),i(D,W),i(n,f),le(f,s[2]),i(n,k),i(n,F),i(F,A),i(r,I),g&&g.m(r,null),i(r,O),b&&b.m(r,null),i(r,L),i(r,M),i(M,$),i($,R),i($,C),i(C,q),j=!0,G||(N=[se(f,"input",s[5]),se(F,"click",s[4])],G=!0)},p(_,[T]){T&4&&f.value!==_[2]&&le(f,_[2]),_[0].city&&_[0].state?g?g.p(_,T):(g=ue(_),g.c(),g.m(r,O)):g&&(g.d(1),g=null),_[3]?b?(b.p(_,T),T&8&&z(b,1)):(b=de(_),b.c(),z(b,1),b.m(r,L)):b&&(be(),Z(b,1,1,()=>{b=null}),ye())},i(_){j||(z(b),j=!0)},o(_){Z(b),j=!1},d(_){u(e),_&&u(l),_&&u(r),g&&g.d(),b&&b.d(),G=!1,Ue(N)}}}function Ne(s,e){return`https://api.weather.gov/points/${s},${e}`}function Re(s,e,l){return`https://api.weather.gov/gridpoints/${s}/${e},${l}/forecast`}function Ye(s){return s.reduce((e,l,r)=>{if(r<s.length-1){let t=new Date(s[r].startTime).getDay(),o=new Date(s[r+1].startTime).getDay();if(t===o){let a={morning:s[r],night:s[r+1]};a.morning.dayOfWeek=te(t),a.night.dayOfWeek=te(o),e.push(a)}else if(r===0){let a={morning:s[r],night:null};a.morning.dayOfWeek=te(t),e.push(a)}}return e},[])}function te(s){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][s]}function qe(s,e,l){const r={city:"Salt Lake City",state:"UT",office:"SLC",gridX:97,gridY:176,lat:40.788333,lng:-111.977778};let t={},o=[],a="",n=!1;Le(async()=>{await c()});function c(){l(0,t=r),W()}async function D(F,A){let I;I=await fetch(Ne(t.lat,t.lng)).then(O=>O.json()),l(0,t.office=I.properties.gridId,t),l(0,t.gridX=I.properties.gridX,t),l(0,t.gridY=I.properties.gridY,t),l(0,t.city=I.properties.relativeLocation.properties.city,t),l(0,t.state=I.properties.relativeLocation.properties.state,t)}async function W(){const F=new Date;(!t.office||!t.gridX||!t.gridY)&&await D(t.lat,t.lng);let A;A=await fetch(Re(t.office,t.gridX,t.gridY)).then(M=>M.json()),l(1,o=Ye(A.properties.periods));const I=new Date,O=1e3,L=I.getTime()-F.getTime();L<O?setTimeout(()=>{l(3,n=!0)},1e3-L):l(3,n=!0)}async function f(){if(a.length>0){l(3,n=!1);let F;{let A=`https://nominatim.openstreetmap.org/search?q=${a}&format=geocodejson`;F=await fetch(encodeURI(A)).then(I=>I.json())}l(0,t.lng=F.features[0].geometry.coordinates[0],t),l(0,t.lat=F.features[0].geometry.coordinates[1],t),await D(t.lat,t.lng),W()}}function k(){a=this.value,l(2,a)}return[t,o,a,n,f,k]}class Xe extends pe{constructor(e){super(),me(this,e,qe,je,_e,{})}}export{Xe as default};
