import{S as re,i as le,s as ne,e as h,c as p,a as w,d as u,b as m,f as Q,H as i,p as z,I as x,t as v,g as y,h as N,j as M,l as P,J as ee,K as se,L as ie,M as oe,N as We,k as ce,n as Z,O as Fe,o as fe,P as Te,Q as Se,R as ue,T as de,U as Ue,u as Ae,m as he,V as pe,v as me,w as _e,x as ge,A as ve}from"../chunks/vendor-483e1edf.js";function Le(o){let e,n=o[0].morning.name+"",r,t,s;return{c(){e=h("h2"),r=v(n),t=v("'s Forecast: "),s=v(o[2])},l(a){e=p(a,"H2",{});var l=w(e);r=y(l,n),t=y(l,"'s Forecast: "),s=y(l,o[2]),l.forEach(u)},m(a,l){Q(a,e,l),i(e,r),i(e,t),i(e,s)},p(a,l){l&1&&n!==(n=a[0].morning.name+"")&&N(r,n),l&4&&N(s,a[2])},i:x,o:x,d(a){a&&u(e)}}}function Me(o){let e,n,r,t=o[0].morning&&ye(o),s=o[0].night&&be(o);return{c(){e=h("div"),t&&t.c(),n=M(),s&&s.c(),this.h()},l(a){e=p(a,"DIV",{class:!0});var l=w(e);t&&t.l(l),n=P(l),s&&s.l(l),l.forEach(u),this.h()},h(){m(e,"class","md:grid-cols-2"),se(e,"grid",o[0].night)},m(a,l){Q(a,e,l),t&&t.m(e,null),i(e,n),s&&s.m(e,null)},p(a,l){a[0].morning?t?t.p(a,l):(t=ye(a),t.c(),t.m(e,n)):t&&(t.d(1),t=null),a[0].night?s?s.p(a,l):(s=be(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null),l&1&&se(e,"grid",a[0].night)},i(a){r||ie(()=>{r=oe(e,We,{y:5,duration:250}),r.start()})},o:x,d(a){a&&u(e),t&&t.d(),s&&s.d()}}}function ye(o){let e,n,r=o[0].morning.dayOfWeek+"",t,s,a,l,c,I,T,f=o[0].morning.temperature+"",E,W,V=o[0].morning.temperatureUnit+"",D,H,A,L,O=o[0].morning.windSpeed+"",Y,j,X=o[0].morning.windDirection+"",C,$,R,g,b,_,F=o[0].morning.detailedForecast+"",S;return{c(){e=h("div"),n=h("h3"),t=v(r),s=M(),a=h("p"),l=h("em"),c=v("It may or may not be"),I=M(),T=h("em"),E=v(f),W=v("\xB0"),D=v(V),H=M(),A=h("p"),L=v("With winds "),Y=v(O),j=M(),C=v(X),$=M(),R=h("img"),b=M(),_=h("p"),S=v(F),this.h()},l(U){e=p(U,"DIV",{class:!0});var d=w(e);n=p(d,"H3",{class:!0});var k=w(n);t=y(k,r),k.forEach(u),s=P(d),a=p(d,"P",{});var q=w(a);l=p(q,"EM",{class:!0});var J=w(l);c=y(J,"It may or may not be"),J.forEach(u),I=P(q),T=p(q,"EM",{class:!0});var K=w(T);E=y(K,f),W=y(K,"\xB0"),D=y(K,V),K.forEach(u),q.forEach(u),H=P(d),A=p(d,"P",{});var G=w(A);L=y(G,"With winds "),Y=y(G,O),j=P(G),C=y(G,X),G.forEach(u),$=P(d),R=p(d,"IMG",{src:!0,alt:!0}),b=P(d),_=p(d,"P",{class:!0});var B=w(_);S=y(B,F),B.forEach(u),d.forEach(u),this.h()},h(){m(n,"class","col-span-3"),m(l,"class","italic"),m(T,"class","font-bold"),ee(R.src,g=o[0].morning.icon)||m(R,"src",g),m(R,"alt","forecast icon"),m(_,"class","col-span-3"),m(e,"class","grid grid-cols-3 gap-2 justify-items-center")},m(U,d){Q(U,e,d),i(e,n),i(n,t),i(e,s),i(e,a),i(a,l),i(l,c),i(a,I),i(a,T),i(T,E),i(T,W),i(T,D),i(e,H),i(e,A),i(A,L),i(A,Y),i(A,j),i(A,C),i(e,$),i(e,R),i(e,b),i(e,_),i(_,S)},p(U,d){d&1&&r!==(r=U[0].morning.dayOfWeek+"")&&N(t,r),d&1&&f!==(f=U[0].morning.temperature+"")&&N(E,f),d&1&&V!==(V=U[0].morning.temperatureUnit+"")&&N(D,V),d&1&&O!==(O=U[0].morning.windSpeed+"")&&N(Y,O),d&1&&X!==(X=U[0].morning.windDirection+"")&&N(C,X),d&1&&!ee(R.src,g=U[0].morning.icon)&&m(R,"src",g),d&1&&F!==(F=U[0].morning.detailedForecast+"")&&N(S,F)},d(U){U&&u(e)}}}function be(o){let e,n,r=o[0].night.dayOfWeek+"",t,s,a,l,c,I,T,f,E=o[0].night.temperature+"",W,V,D=o[0].night.temperatureUnit+"",H,A,L,O,Y=o[0].night.windSpeed+"",j,X,C=o[0].night.windDirection+"",$,R,g,b,_,F,S=o[0].night.detailedForecast+"",U;return{c(){e=h("div"),n=h("h3"),t=v(r),s=v(" night"),a=M(),l=h("p"),c=h("em"),I=v("It may or may not be"),T=M(),f=h("em"),W=v(E),V=v("\xB0"),H=v(D),A=M(),L=h("p"),O=v("With winds "),j=v(Y),X=M(),$=v(C),R=M(),g=h("img"),_=M(),F=h("p"),U=v(S),this.h()},l(d){e=p(d,"DIV",{class:!0});var k=w(e);n=p(k,"H3",{class:!0});var q=w(n);t=y(q,r),s=y(q," night"),q.forEach(u),a=P(k),l=p(k,"P",{});var J=w(l);c=p(J,"EM",{class:!0});var K=w(c);I=y(K,"It may or may not be"),K.forEach(u),T=P(J),f=p(J,"EM",{class:!0});var G=w(f);W=y(G,E),V=y(G,"\xB0"),H=y(G,D),G.forEach(u),J.forEach(u),A=P(k),L=p(k,"P",{});var B=w(L);O=y(B,"With winds "),j=y(B,Y),X=P(B),$=y(B,C),B.forEach(u),R=P(k),g=p(k,"IMG",{src:!0,alt:!0}),_=P(k),F=p(k,"P",{class:!0});var ae=w(F);U=y(ae,S),ae.forEach(u),k.forEach(u),this.h()},h(){m(n,"class","col-span-3"),m(c,"class","italic"),m(f,"class","font-bold"),ee(g.src,b=o[0].night.icon)||m(g,"src",b),m(g,"alt","forecast icon"),m(F,"class","col-span-3"),m(e,"class","grid grid-cols-3 pl-2 gap-2 justify-items-center md:border-l")},m(d,k){Q(d,e,k),i(e,n),i(n,t),i(n,s),i(e,a),i(e,l),i(l,c),i(c,I),i(l,T),i(l,f),i(f,W),i(f,V),i(f,H),i(e,A),i(e,L),i(L,O),i(L,j),i(L,X),i(L,$),i(e,R),i(e,g),i(e,_),i(e,F),i(F,U)},p(d,k){k&1&&r!==(r=d[0].night.dayOfWeek+"")&&N(t,r),k&1&&E!==(E=d[0].night.temperature+"")&&N(W,E),k&1&&D!==(D=d[0].night.temperatureUnit+"")&&N(H,D),k&1&&Y!==(Y=d[0].night.windSpeed+"")&&N(j,Y),k&1&&C!==(C=d[0].night.windDirection+"")&&N($,C),k&1&&!ee(g.src,b=d[0].night.icon)&&m(g,"src",b),k&1&&S!==(S=d[0].night.detailedForecast+"")&&N(U,S)},d(d){d&&u(e)}}}function Pe(o){let e,n;function r(a,l){return a[1]?Me:Le}let t=r(o),s=t(o);return{c(){e=h("article"),n=h("div"),s.c(),this.h()},l(a){e=p(a,"ARTICLE",{class:!0});var l=w(e);n=p(l,"DIV",{});var c=w(n);s.l(c),c.forEach(u),l.forEach(u),this.h()},h(){m(e,"class","weatherCard")},m(a,l){Q(a,e,l),i(e,n),s.m(n,null)},p(a,[l]){t===(t=r(a))&&s?s.p(a,l):(s.d(1),s=t(a),s&&(s.c(),z(s,1),s.m(n,null)))},i(a){z(s)},o:x,d(a){a&&u(e),s.d()}}}function Ve(o,e,n){let r,{data:t}=e,{expand:s=!0}=e;return o.$$set=a=>{"data"in a&&n(0,t=a.data),"expand"in a&&n(1,s=a.expand)},o.$$.update=()=>{o.$$.dirty&1&&n(2,r=t.night?`High: ${t.morning.temperature} Low: ${t.night.temperature}, ${t.morning.shortForecast}`:`High: ${t.morning.temperature} ${t.morning.shortForecast}`)},[t,s,r]}class we extends re{constructor(e){super();le(this,e,Ve,Pe,ne,{data:0,expand:1})}}function ke(o,e,n){const r=o.slice();return r[10]=e[n],r[12]=n,r}function Ee(o){let e,n=o[0].city+"",r,t,s=o[0].state+"",a;return{c(){e=h("h2"),r=v(n),t=v(", "),a=v(s),this.h()},l(l){e=p(l,"H2",{class:!0});var c=w(e);r=y(c,n),t=y(c,", "),a=y(c,s),c.forEach(u),this.h()},h(){m(e,"class","text-3xl text-sky-100 m-2")},m(l,c){Q(l,e,c),i(e,r),i(e,t),i(e,a)},p(l,c){c&1&&n!==(n=l[0].city+"")&&N(r,n),c&1&&s!==(s=l[0].state+"")&&N(a,s)},d(l){l&&u(e)}}}function De(o){let e,n,r=o[1],t=[];for(let a=0;a<r.length;a+=1)t[a]=Ie(ke(o,r,a));const s=a=>Z(t[a],1,1,()=>{t[a]=null});return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=ce()},l(a){for(let l=0;l<t.length;l+=1)t[l].l(a);e=ce()},m(a,l){for(let c=0;c<t.length;c+=1)t[c].m(a,l);Q(a,e,l),n=!0},p(a,l){if(l&2){r=a[1];let c;for(c=0;c<r.length;c+=1){const I=ke(a,r,c);t[c]?(t[c].p(I,l),z(t[c],1)):(t[c]=Ie(I),t[c].c(),z(t[c],1),t[c].m(e.parentNode,e))}for(he(),c=r.length;c<t.length;c+=1)s(c);fe()}},i(a){if(!n){for(let l=0;l<r.length;l+=1)z(t[l]);n=!0}},o(a){t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)Z(t[l]);n=!1},d(a){Te(t,a),a&&u(e)}}}function He(o){let e,n;return e=new we({props:{data:o[10],expand:!0}}),{c(){me(e.$$.fragment)},l(r){_e(e.$$.fragment,r)},m(r,t){ge(e,r,t),n=!0},p(r,t){const s={};t&2&&(s.data=r[10]),e.$set(s)},i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){Z(e.$$.fragment,r),n=!1},d(r){ve(e,r)}}}function Oe(o){let e,n;return e=new we({props:{data:o[10],expand:!0}}),{c(){me(e.$$.fragment)},l(r){_e(e.$$.fragment,r)},m(r,t){ge(e,r,t),n=!0},p(r,t){const s={};t&2&&(s.data=r[10]),e.$set(s)},i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){Z(e.$$.fragment,r),n=!1},d(r){ve(e,r)}}}function Ie(o){let e,n,r,t,s,a,l;const c=[Oe,He],I=[];function T(f,E){return f[12]===0?0:1}return n=T(o),r=I[n]=c[n](o),{c(){e=h("div"),r.c(),t=M(),this.h()},l(f){e=p(f,"DIV",{class:!0});var E=w(e);r.l(E),t=P(E),E.forEach(u),this.h()},h(){m(e,"class","py-2")},m(f,E){Q(f,e,E),I[n].m(e,null),i(e,t),l=!0},p(f,E){r.p(f,E)},i(f){l||(z(r),ie(()=>{a&&a.end(1),s=oe(e,pe,{duration:500}),s.start()}),l=!0)},o(f){Z(r),s&&s.invalidate(),a=Fe(e,pe,{}),l=!1},d(f){f&&u(e),I[n].d(),f&&a&&a.end()}}}function je(o){let e,n,r,t,s,a,l,c,I,T,f,E,W,V,D,H,A,L,O,Y,j,X,C,$,R,g=o[0].city&&o[0].state&&Ee(o),b=o[3]&&De(o);return{c(){e=h("meta"),n=M(),r=h("div"),t=h("h1"),s=v("Welcome to a special weather App. It tells you the weather, but is honest about it"),a=M(),l=h("div"),c=h("label"),I=h("h2"),T=v("Address"),f=h("input"),E=M(),W=h("button"),V=v("Get Forecast"),D=M(),g&&g.c(),H=M(),b&&b.c(),A=M(),L=h("div"),O=h("p"),Y=v("Data provided by the US NWS. "),j=h("a"),X=v("View source code"),this.h()},l(_){const F=Se('[data-svelte="svelte-1i7y4y"]',document.head);e=p(F,"META",{name:!0,content:!0}),F.forEach(u),n=P(_),r=p(_,"DIV",{class:!0});var S=w(r);t=p(S,"H1",{});var U=w(t);s=y(U,"Welcome to a special weather App. It tells you the weather, but is honest about it"),U.forEach(u),a=P(S),l=p(S,"DIV",{class:!0,id:!0});var d=w(l);c=p(d,"LABEL",{for:!0});var k=w(c);I=p(k,"H2",{});var q=w(I);T=y(q,"Address"),q.forEach(u),k.forEach(u),f=p(d,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),E=P(d),W=p(d,"BUTTON",{class:!0});var J=w(W);V=y(J,"Get Forecast"),J.forEach(u),d.forEach(u),D=P(S),g&&g.l(S),H=P(S),b&&b.l(S),A=P(S),L=p(S,"DIV",{});var K=w(L);O=p(K,"P",{});var G=w(O);Y=y(G,"Data provided by the US NWS. "),j=p(G,"A",{href:!0,class:!0});var B=w(j);X=y(B,"View source code"),B.forEach(u),G.forEach(u),K.forEach(u),S.forEach(u),this.h()},h(){m(e,"name","description"),m(e,"content","A weather app that is honest about it's predictions"),document.title="Your honest Weather forecast",m(c,"for","address"),m(f,"id","address"),m(f,"type","text"),m(f,"placeholder","Enter a location"),m(f,"class","text-stone-900"),m(W,"class","bg-stone-100 hover:bg-stone-400 text-stone-900 font-semibold py-2 px-4 border border-stone-400 rounded shadow"),m(l,"class","container mx-auto my-4"),m(l,"id","address-input"),m(j,"href","https://github.com/Pachwenko/almost-accurate-weather"),m(j,"class","normal-link"),m(r,"class","mx-auto bg-stone-900 text-stone-100 flex flex-col mx-auto text-center min-h-screen")},m(_,F){i(document.head,e),Q(_,n,F),Q(_,r,F),i(r,t),i(t,s),i(r,a),i(r,l),i(l,c),i(c,I),i(I,T),i(l,f),ue(f,o[2]),i(l,E),i(l,W),i(W,V),i(r,D),g&&g.m(r,null),i(r,H),b&&b.m(r,null),i(r,A),i(r,L),i(L,O),i(O,Y),i(O,j),i(j,X),C=!0,$||(R=[de(f,"input",o[5]),de(W,"click",o[4])],$=!0)},p(_,[F]){F&4&&f.value!==_[2]&&ue(f,_[2]),_[0].city&&_[0].state?g?g.p(_,F):(g=Ee(_),g.c(),g.m(r,H)):g&&(g.d(1),g=null),_[3]?b?(b.p(_,F),F&8&&z(b,1)):(b=De(_),b.c(),z(b,1),b.m(r,A)):b&&(he(),Z(b,1,1,()=>{b=null}),fe())},i(_){C||(z(b),C=!0)},o(_){Z(b),C=!1},d(_){u(e),_&&u(n),_&&u(r),g&&g.d(),b&&b.d(),$=!1,Ue(R)}}}function Ne(o,e){return`https://api.weather.gov/points/${o},${e}`}function Ce(o,e,n){return`https://api.weather.gov/gridpoints/${o}/${e},${n}/forecast`}function Re(o){return o.reduce((e,n,r)=>{if(r<o.length-1){let t=new Date(o[r].startTime).getDay(),s=new Date(o[r+1].startTime).getDay();if(t===s){let a={morning:o[r],night:o[r+1]};a.morning.dayOfWeek=te(t),a.night.dayOfWeek=te(s),e.push(a)}else if(r===0){let a={morning:o[r],night:null};a.morning.dayOfWeek=te(t),e.push(a)}}return e},[])}function te(o){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][o]}function Ye(o,e,n){const r={city:"Salt Lake City",state:"UT",office:"SLC",gridX:97,gridY:176,lat:40.788333,lng:-111.977778};let t={},s=[],a="",l=!1;Ae(async()=>{await c()});function c(){n(0,t=r),T()}async function I(W,V){let D;D=await fetch(Ne(t.lat,t.lng)).then(H=>H.json()),n(0,t.office=D.properties.gridId,t),n(0,t.gridX=D.properties.gridX,t),n(0,t.gridY=D.properties.gridY,t),n(0,t.city=D.properties.relativeLocation.properties.city,t),n(0,t.state=D.properties.relativeLocation.properties.state,t)}async function T(){const W=new Date;(!t.office||!t.gridX||!t.gridY)&&await I(t.lat,t.lng);let V;V=await fetch(Ce(t.office,t.gridX,t.gridY)).then(L=>L.json()),n(1,s=Re(V.properties.periods));const D=new Date,H=1e3,A=D.getTime()-W.getTime();A<H?setTimeout(()=>{n(3,l=!0)},1e3-A):n(3,l=!0)}async function f(){if(a.length>0){n(3,l=!1);let W;{let V=`https://nominatim.openstreetmap.org/search?q=${a}&format=geocodejson`;W=await fetch(encodeURI(V)).then(D=>D.json())}n(0,t.lng=W.features[0].geometry.coordinates[0],t),n(0,t.lat=W.features[0].geometry.coordinates[1],t),await I(t.lat,t.lng),T()}}function E(){a=this.value,n(2,a)}return[t,s,a,l,f,E]}class Xe extends re{constructor(e){super();le(this,e,Ye,je,ne,{})}}export{Xe as default};
